{
  "_format": "hh-sol-artifact-1",
  "contractName": "MedicalRecordsIntegrity",
  "sourceName": "contracts/MedicalRecordsIntegrity_Avalanche.sol",
  "abi": [
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "integrityScore",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "rewardAmount",
          "type": "uint256"
        }
      ],
      "name": "IntegrityVerified",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "accessor",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "integrityVerified",
          "type": "bool"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "RecordAccessed",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "provider",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "patient",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        }
      ],
      "name": "RecordCreated",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "INTEGRITY_REWARD",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "accessLogs",
      "outputs": [
        {
          "internalType": "address",
          "name": "accessor",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "timestamp",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "verified",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "claimRewards",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "patientId",
          "type": "uint256"
        },
        {
          "internalType": "bytes32",
          "name": "recordHash",
          "type": "bytes32"
        },
        {
          "internalType": "address",
          "name": "patientAddress",
          "type": "address"
        }
      ],
      "name": "createMedicalRecord",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "limit",
          "type": "uint256"
        }
      ],
      "name": "getAccessHistory",
      "outputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "accessor",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "timestamp",
              "type": "uint256"
            },
            {
              "internalType": "bool",
              "name": "verified",
              "type": "bool"
            }
          ],
          "internalType": "struct MedicalRecordsIntegrity.AccessLog[]",
          "name": "",
          "type": "tuple[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "patient",
          "type": "address"
        }
      ],
      "name": "getPatientRecords",
      "outputs": [
        {
          "internalType": "bytes32[]",
          "name": "",
          "type": "bytes32[]"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        }
      ],
      "name": "getRecord",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "recordHash",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "creationTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "provider",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "patient",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "accessCount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "integrityScore",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "name": "medicalRecords",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "recordHash",
          "type": "bytes32"
        },
        {
          "internalType": "uint256",
          "name": "creationTimestamp",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "provider",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "patient",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "exists",
          "type": "bool"
        },
        {
          "internalType": "uint256",
          "name": "accessCount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "integrityScore",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "patientRecords",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "providerRewards",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "bytes32",
          "name": "recordId",
          "type": "bytes32"
        },
        {
          "internalType": "bytes",
          "name": "zkProof",
          "type": "bytes"
        },
        {
          "internalType": "bytes32",
          "name": "currentHash",
          "type": "bytes32"
        }
      ],
      "name": "verifyIntegrity",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "stateMutability": "payable",
      "type": "receive"
    }
  ],
  "bytecode": "0x608060405234801561001057600080fd5b50610e7a806100206000396000f3fe6080604052600436106100a05760003560e01c8063491257881161006457806349125788146101a957806394f0df61146101c9578063a6b59fc0146101e9578063abb8d7fe14610230578063acf8af3e1461025d578063ee26c3531461027d57600080fd5b806318bd4847146100ac578063213681cd146100e25780632c942df81461013c5780632d29ad1314610165578063372500ab1461019257600080fd5b366100a757005b600080fd5b3480156100b857600080fd5b506100cc6100c7366004610b79565b610329565b6040516100d99190610b9b565b60405180910390f35b3480156100ee57600080fd5b506101026100fd366004610bdf565b610395565b6040805196875260208701959095526001600160a01b039384169486019490945291166060840152608083015260a082015260c0016100d9565b34801561014857600080fd5b5061015766038d7ea4c6800081565b6040519081526020016100d9565b34801561017157600080fd5b50610185610180366004610bf8565b610488565b6040516100d99190610c1a565b34801561019e57600080fd5b506101a7610607565b005b3480156101b557600080fd5b506101a76101c4366004610c94565b6106f8565b3480156101d557600080fd5b506101576101e4366004610d58565b610916565b3480156101f557600080fd5b50610209610204366004610bf8565b610947565b604080516001600160a01b03909416845260208401929092521515908201526060016100d9565b34801561023c57600080fd5b5061015761024b366004610b79565b60036020526000908152604090205481565b34801561026957600080fd5b50610157610278366004610d82565b610996565b34801561028957600080fd5b506102e6610298366004610bdf565b600060208190529081526040902080546001820154600283015460038401546004850154600590950154939492936001600160a01b039283169392821692600160a01b90920460ff16919087565b6040805197885260208801969096526001600160a01b03948516958701959095529290911660608501521515608084015260a083015260c082015260e0016100d9565b6001600160a01b03811660009081526002602090815260409182902080548351818402810184019094528084526060939283018282801561038957602002820191906000526020600020905b815481526020019060010190808311610375575b50505050509050919050565b600081815260208181526040808320815160e0810183528154815260018201549381019390935260028101546001600160a01b039081169284019290925260038101549182166060840152600160a01b90910460ff16151560808301819052600482015460a084015260059091015460c083015282918291829182918291906104585760405162461bcd60e51b815260206004820152601060248201526f149958dbdc99081b9bdd08199bdd5b9960821b60448201526064015b60405180910390fd5b805160208201516040830151606084015160a085015160c090950151939c929b5090995097509195509350915050565b6000828152600160209081526040808320805482518185028101850190935280835260609493849084015b8282101561050d576000848152602090819020604080516060810182526003860290920180546001600160a01b031683526001808201548486015260029091015460ff1615159183019190915290835290920191016104b3565b50505050905082815111610522579050610601565b60008367ffffffffffffffff81111561053d5761053d610c7e565b60405190808252806020026020018201604052801561058857816020015b604080516060810182526000808252602080830182905292820152825260001990920191018161055b5790505b509050600084835161059a9190610dcd565b905060005b858110156105fa57836105b28284610de0565b815181106105c2576105c2610df3565b60200260200101518382815181106105dc576105dc610df3565b602002602001018190525080806105f290610e09565b91505061059f565b5090925050505b92915050565b336000908152600360205260409020548061065b5760405162461bcd60e51b81526020600482015260146024820152734e6f207265776172647320617661696c61626c6560601b604482015260640161044f565b336000818152600360205260408082208290555190919083908381818185875af1925050503d80600081146106ac576040519150601f19603f3d011682016040523d82523d6000602084013e6106b1565b606091505b50509050806106f45760405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b604482015260640161044f565b5050565b60008381526020819052604090206003810154600160a01b900460ff166107545760405162461bcd60e51b815260206004820152601060248201526f149958dbdc99081b9bdd08199bdd5b9960821b604482015260640161044f565b8054600085815260016020818152604080842081516060810183523381524281850190815296891492810183815282548087018455928752938620905160039092020180546001600160a01b0319166001600160a01b03909216919091178155945192850192909255516002909301805460ff191693151593909317909255600483018054916107e383610e09565b919050555080156108b0576064826005015410156108135760058201805490600061080d83610e09565b91905055505b60018201546108259062278d00610de0565b4211156108ab5760028201546001600160a01b03166000908152600360205260408120805466038d7ea4c68000929061085f908490610de0565b909155505060058201546040805191825266038d7ea4c68000602083015286917fd0d571d9f0b5c44871a95020f27642c5470300df103d7e88812ee31cdd85307f910160405180910390a25b6108d1565b6005820154156108d157600282600501546108cb9190610e22565b60058301555b604080518215158152426020820152339187917fc54b9bbda957e42b388f28c4ccb232df7fbd5298ff96e2bdcff6589f3353af24910160405180910390a35050505050565b6002602052816000526040600020818154811061093257600080fd5b90600052602060002001600091509150505481565b6001602052816000526040600020818154811061096357600080fd5b60009182526020909120600390910201805460018201546002909201546001600160a01b03909116935090915060ff1683565b604080516020810185905290810183905233606090811b6bffffffffffffffffffffffff19169082015242607482015260009060940160408051808303601f190181529181528151602092830120600081815292839052912060030154909150600160a01b900460ff1615610a455760405162461bcd60e51b81526020600482015260156024820152745265636f726420616c72656164792065786973747360581b604482015260640161044f565b6040805160e081018252848152426020808301828152338486018181526001600160a01b0389811660608801818152600160808a01818152600060a08c01818152606460c08e019081528f8352828c528e83209d518e5599518d85015596516002808e0180549289166001600160a01b031990931692909217909155935160038d01805493511515600160a01b026001600160a81b0319909416919097161791909117909455935160048a0155945160059098019790975586815292845286832080549182018155835292909120909101859055925191929184917fae64bf209eaebf419b459bc7ab0a0b7045bbe5b079ec2b6c4bb5d9f38209157691610b4e91815260200190565b60405180910390a49392505050565b80356001600160a01b0381168114610b7457600080fd5b919050565b600060208284031215610b8b57600080fd5b610b9482610b5d565b9392505050565b6020808252825182820181905260009190848201906040850190845b81811015610bd357835183529284019291840191600101610bb7565b50909695505050505050565b600060208284031215610bf157600080fd5b5035919050565b60008060408385031215610c0b57600080fd5b50508035926020909101359150565b602080825282518282018190526000919060409081850190868401855b82811015610c7157815180516001600160a01b03168552868101518786015285015115158585015260609093019290850190600101610c37565b5091979650505050505050565b634e487b7160e01b600052604160045260246000fd5b600080600060608486031215610ca957600080fd5b83359250602084013567ffffffffffffffff80821115610cc857600080fd5b818601915086601f830112610cdc57600080fd5b813581811115610cee57610cee610c7e565b604051601f8201601f19908116603f01168101908382118183101715610d1657610d16610c7e565b81604052828152896020848701011115610d2f57600080fd5b826020860160208301376000602084830101528096505050505050604084013590509250925092565b60008060408385031215610d6b57600080fd5b610d7483610b5d565b946020939093013593505050565b600080600060608486031215610d9757600080fd5b8335925060208401359150610dae60408501610b5d565b90509250925092565b634e487b7160e01b600052601160045260246000fd5b8181038181111561060157610601610db7565b8082018082111561060157610601610db7565b634e487b7160e01b600052603260045260246000fd5b600060018201610e1b57610e1b610db7565b5060010190565b600082610e3f57634e487b7160e01b600052601260045260246000fd5b50049056fea264697066735822122040e4dc56315255ac77b773abc3e07736ca53047cd994a9894a6973dfd328a6e664736f6c63430008130033",
  "deployedBytecode": "0x6080604052600436106100a05760003560e01c8063491257881161006457806349125788146101a957806394f0df61146101c9578063a6b59fc0146101e9578063abb8d7fe14610230578063acf8af3e1461025d578063ee26c3531461027d57600080fd5b806318bd4847146100ac578063213681cd146100e25780632c942df81461013c5780632d29ad1314610165578063372500ab1461019257600080fd5b366100a757005b600080fd5b3480156100b857600080fd5b506100cc6100c7366004610b79565b610329565b6040516100d99190610b9b565b60405180910390f35b3480156100ee57600080fd5b506101026100fd366004610bdf565b610395565b6040805196875260208701959095526001600160a01b039384169486019490945291166060840152608083015260a082015260c0016100d9565b34801561014857600080fd5b5061015766038d7ea4c6800081565b6040519081526020016100d9565b34801561017157600080fd5b50610185610180366004610bf8565b610488565b6040516100d99190610c1a565b34801561019e57600080fd5b506101a7610607565b005b3480156101b557600080fd5b506101a76101c4366004610c94565b6106f8565b3480156101d557600080fd5b506101576101e4366004610d58565b610916565b3480156101f557600080fd5b50610209610204366004610bf8565b610947565b604080516001600160a01b03909416845260208401929092521515908201526060016100d9565b34801561023c57600080fd5b5061015761024b366004610b79565b60036020526000908152604090205481565b34801561026957600080fd5b50610157610278366004610d82565b610996565b34801561028957600080fd5b506102e6610298366004610bdf565b600060208190529081526040902080546001820154600283015460038401546004850154600590950154939492936001600160a01b039283169392821692600160a01b90920460ff16919087565b6040805197885260208801969096526001600160a01b03948516958701959095529290911660608501521515608084015260a083015260c082015260e0016100d9565b6001600160a01b03811660009081526002602090815260409182902080548351818402810184019094528084526060939283018282801561038957602002820191906000526020600020905b815481526020019060010190808311610375575b50505050509050919050565b600081815260208181526040808320815160e0810183528154815260018201549381019390935260028101546001600160a01b039081169284019290925260038101549182166060840152600160a01b90910460ff16151560808301819052600482015460a084015260059091015460c083015282918291829182918291906104585760405162461bcd60e51b815260206004820152601060248201526f149958dbdc99081b9bdd08199bdd5b9960821b60448201526064015b60405180910390fd5b805160208201516040830151606084015160a085015160c090950151939c929b5090995097509195509350915050565b6000828152600160209081526040808320805482518185028101850190935280835260609493849084015b8282101561050d576000848152602090819020604080516060810182526003860290920180546001600160a01b031683526001808201548486015260029091015460ff1615159183019190915290835290920191016104b3565b50505050905082815111610522579050610601565b60008367ffffffffffffffff81111561053d5761053d610c7e565b60405190808252806020026020018201604052801561058857816020015b604080516060810182526000808252602080830182905292820152825260001990920191018161055b5790505b509050600084835161059a9190610dcd565b905060005b858110156105fa57836105b28284610de0565b815181106105c2576105c2610df3565b60200260200101518382815181106105dc576105dc610df3565b602002602001018190525080806105f290610e09565b91505061059f565b5090925050505b92915050565b336000908152600360205260409020548061065b5760405162461bcd60e51b81526020600482015260146024820152734e6f207265776172647320617661696c61626c6560601b604482015260640161044f565b336000818152600360205260408082208290555190919083908381818185875af1925050503d80600081146106ac576040519150601f19603f3d011682016040523d82523d6000602084013e6106b1565b606091505b50509050806106f45760405162461bcd60e51b815260206004820152600f60248201526e151c985b9cd9995c8819985a5b1959608a1b604482015260640161044f565b5050565b60008381526020819052604090206003810154600160a01b900460ff166107545760405162461bcd60e51b815260206004820152601060248201526f149958dbdc99081b9bdd08199bdd5b9960821b604482015260640161044f565b8054600085815260016020818152604080842081516060810183523381524281850190815296891492810183815282548087018455928752938620905160039092020180546001600160a01b0319166001600160a01b03909216919091178155945192850192909255516002909301805460ff191693151593909317909255600483018054916107e383610e09565b919050555080156108b0576064826005015410156108135760058201805490600061080d83610e09565b91905055505b60018201546108259062278d00610de0565b4211156108ab5760028201546001600160a01b03166000908152600360205260408120805466038d7ea4c68000929061085f908490610de0565b909155505060058201546040805191825266038d7ea4c68000602083015286917fd0d571d9f0b5c44871a95020f27642c5470300df103d7e88812ee31cdd85307f910160405180910390a25b6108d1565b6005820154156108d157600282600501546108cb9190610e22565b60058301555b604080518215158152426020820152339187917fc54b9bbda957e42b388f28c4ccb232df7fbd5298ff96e2bdcff6589f3353af24910160405180910390a35050505050565b6002602052816000526040600020818154811061093257600080fd5b90600052602060002001600091509150505481565b6001602052816000526040600020818154811061096357600080fd5b60009182526020909120600390910201805460018201546002909201546001600160a01b03909116935090915060ff1683565b604080516020810185905290810183905233606090811b6bffffffffffffffffffffffff19169082015242607482015260009060940160408051808303601f190181529181528151602092830120600081815292839052912060030154909150600160a01b900460ff1615610a455760405162461bcd60e51b81526020600482015260156024820152745265636f726420616c72656164792065786973747360581b604482015260640161044f565b6040805160e081018252848152426020808301828152338486018181526001600160a01b0389811660608801818152600160808a01818152600060a08c01818152606460c08e019081528f8352828c528e83209d518e5599518d85015596516002808e0180549289166001600160a01b031990931692909217909155935160038d01805493511515600160a01b026001600160a81b0319909416919097161791909117909455935160048a0155945160059098019790975586815292845286832080549182018155835292909120909101859055925191929184917fae64bf209eaebf419b459bc7ab0a0b7045bbe5b079ec2b6c4bb5d9f38209157691610b4e91815260200190565b60405180910390a49392505050565b80356001600160a01b0381168114610b7457600080fd5b919050565b600060208284031215610b8b57600080fd5b610b9482610b5d565b9392505050565b6020808252825182820181905260009190848201906040850190845b81811015610bd357835183529284019291840191600101610bb7565b50909695505050505050565b600060208284031215610bf157600080fd5b5035919050565b60008060408385031215610c0b57600080fd5b50508035926020909101359150565b602080825282518282018190526000919060409081850190868401855b82811015610c7157815180516001600160a01b03168552868101518786015285015115158585015260609093019290850190600101610c37565b5091979650505050505050565b634e487b7160e01b600052604160045260246000fd5b600080600060608486031215610ca957600080fd5b83359250602084013567ffffffffffffffff80821115610cc857600080fd5b818601915086601f830112610cdc57600080fd5b813581811115610cee57610cee610c7e565b604051601f8201601f19908116603f01168101908382118183101715610d1657610d16610c7e565b81604052828152896020848701011115610d2f57600080fd5b826020860160208301376000602084830101528096505050505050604084013590509250925092565b60008060408385031215610d6b57600080fd5b610d7483610b5d565b946020939093013593505050565b600080600060608486031215610d9757600080fd5b8335925060208401359150610dae60408501610b5d565b90509250925092565b634e487b7160e01b600052601160045260246000fd5b8181038181111561060157610601610db7565b8082018082111561060157610601610db7565b634e487b7160e01b600052603260045260246000fd5b600060018201610e1b57610e1b610db7565b5060010190565b600082610e3f57634e487b7160e01b600052601260045260246000fd5b50049056fea264697066735822122040e4dc56315255ac77b773abc3e07736ca53047cd994a9894a6973dfd328a6e664736f6c63430008130033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
