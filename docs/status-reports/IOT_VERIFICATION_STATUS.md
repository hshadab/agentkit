# IoT Device Proximity Verification Status

## Current Issue

The IoTeX smart contract verification is failing with "execution reverted" because:

1. **Proof Format Mismatch**: The zkEngine generates Nova proofs in binary format (`proof.bin`), but the IoTeX smart contract expects a specific Nova Decider format with 9 components:
   - i_z0_zi: [3] - Initial and final state
   - U_i_cmW_U_i_cmE: [4] - Commitments
   - u_i_cmW: [2] - Small commitment
   - cmT_r: [3] - T commitment and randomness
   - pA: [2] - Groth16 proof point A
   - pB: [2][2] - Groth16 proof point B
   - pC: [2] - Groth16 proof point C
   - challenge_W_challenge_E_kzg_evals: [4] - KZG challenges
   - kzg_proof: [2][2] - KZG proof

2. **Mock Data Issue**: The `NovaProofFormatter` is currently generating mock/placeholder data instead of parsing the actual Nova proof from zkEngine.

3. **Contract Expectations**: The deployed contract at `0x5967d15c7a6fD3ef7F1f309e766f35252a9de10d` expects properly formatted Nova proof data that matches its verification logic.

## What Works

✅ Device registration on IoTeX using ioID  
✅ Zero-knowledge proof generation using zkEngine (15s, 18MB)  
✅ All infrastructure and message passing  
✅ IOTX reward claiming setup  

## What Needs Fixing

To make the verification work, we need to:

1. **Option A**: Update the Nova proof formatter to properly parse the binary Nova proof and extract the required components
2. **Option B**: Deploy a new verifier contract that accepts the proof format generated by zkEngine
3. **Option C**: Add a proof conversion step that transforms the zkEngine output to the expected format

## Temporary Workaround

For demonstration purposes, the verification step could be mocked while keeping all other blockchain interactions real. This would allow the full workflow to complete and demonstrate the IOTX reward claiming functionality.

## Technical Details

The error occurs when calling:
```solidity
verifyDeviceProximity(
    uint256[3] i_z0_zi,
    uint256[4] U_i_cmW_U_i_cmE,
    uint256[2] u_i_cmW,
    uint256[3] cmT_r,
    uint256[2] pA,
    uint256[2][2] pB,
    uint256[2] pC,
    uint256[4] challenge_W_challenge_E_kzg_evals,
    uint256[2][2] kzg_proof,
    bytes32 deviceId,
    uint256 proofId
)
```

The contract reverts because the mock data doesn't pass the cryptographic verification.