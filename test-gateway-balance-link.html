<!DOCTYPE html>
<html>
<head>
    <title>Gateway Balance On-Chain Verification Link Test</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <style>
        body {
            background: #0a0a0a;
            color: #e0e0e0;
            padding: 40px;
        }
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .info-box {
            background: rgba(0, 255, 65, 0.1);
            border: 1px solid #00ff41;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        .info-box h3 {
            color: #00ff41;
            margin-top: 0;
        }
        .info-box ol {
            line-height: 1.8;
        }
        .address-box {
            background: #000;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
            word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1 style="text-align: center; color: #8b9aff;">üîó Gateway Balance On-Chain Verification</h1>
        
        <div class="info-box">
            <h3>‚úÖ Enhancement Added!</h3>
            <p>The Gateway workflow card now includes a <strong>"üîó Verify On-Chain"</strong> link that allows users to:</p>
            <ul>
                <li>View the Gateway balance directly on Etherscan</li>
                <li>Verify the balance is real and on-chain</li>
                <li>Increase transparency for users</li>
            </ul>
        </div>
        
        <div id="messages"></div>
        
        <div style="text-align: center; margin: 30px 0;">
            <button onclick="testWorkflow()" style="background: #8b9aff; color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; font-size: 16px;">
                Launch Gateway Workflow to See Link
            </button>
        </div>
        
        <div class="info-box">
            <h3>üìñ How to Verify Balance On-Chain:</h3>
            <ol>
                <li>Click the <strong>"üîó Verify On-Chain"</strong> link in the Gateway Balance section</li>
                <li>This opens Etherscan's Read Contract tab for the GatewayWallet</li>
                <li>Find function <strong>#3 availableBalance</strong></li>
                <li>Enter these parameters:
                    <div class="address-box">
                        token: 0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238<br>
                        depositor: 0x0077777d7EBA4688BDeF3E311b846F25870A19B9
                    </div>
                </li>
                <li>Click "Query" to see the on-chain balance in wei (divide by 10^6 for USDC)</li>
            </ol>
        </div>
        
        <div class="info-box" style="background: rgba(255, 170, 0, 0.1); border-color: #ffaa00;">
            <h3>üîç What This Proves:</h3>
            <ul>
                <li><strong>Transparency:</strong> Users can verify the Gateway balance is real</li>
                <li><strong>On-chain verification:</strong> Balance is stored in smart contract, not just API</li>
                <li><strong>Trust:</strong> No need to trust the UI - verify directly on Ethereum</li>
                <li><strong>Circle's GatewayWallet:</strong> Official contract at 0x9f3B8679c73C2Fef8b59B4f3444d4e156fb70AA5</li>
            </ul>
        </div>
    </div>
    
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    <script src="/static/js/gateway-zkml-polling.js"></script>
    
    <script>
        async function testWorkflow() {
            console.log('Launching Gateway workflow with on-chain verification link...');
            const result = await window.GatewayZKMLHandler.executeWorkflow('2');
            console.log('Look for the "üîó Verify On-Chain" link next to the Gateway Balance!');
        }
    </script>
</body>
</html>